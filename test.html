<html>
	<head>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.js"></script>
	</head>
	<body>
		<svg></svg>
		<script>
			var svg = d3.select("svg");
			
			var districts = {
				1: {
					number: 1,
					counties: [],
					race: {
						asian: 10,
						african_american: 10,
						white: 10,
						native_american: 10,
						native_islander: 10,
						other: 10,
						multiple: 10
					},
					age: {
						"18to24": 10,
						"25to44": 10,
						"45to65": 10,
						"65plus": 10
					},
					income:{
						level1: 10,
						level2: 10,
						level3: 10,
						level4: 10
					},
					education_level:{

					},
					partisan_lean:{
						democrat: 10,
						republican: 10,
						independent: 10
					}
				},
				2: {
					number: 2,
					counties: [],
					race: {
						asian: 10,
						african_american: 10,
						white: 10,
						native_american: 10,
						native_islander: 10,
						other: 10,
						multiple: 10
					},
					age: {
						"18to24": 10,
						"25to44": 10,
						"45to65": 10,
						"65plus": 10
					},
					income:{
						level1: 10,
						level2: 10,
						level3: 10,
						level4: 10
					},
					education_level:{

					},
					partisan_lean:{
						democrat: 10,
						republican: 10,
						independent: 10
					}
				},
			};
			
			var countyData

			var polygonData = [];
			d3.json("polygons.json").then(function(data){
				data.forEach(function(element){
					element.forEach(function(d){
						if(d.length > 10){
							polygonData.push(d);
						}
					});
				});
				var minX = d3.min(polygonData, function(countyPoints){
					return d3.min(countyPoints, function(singlePoint){
						return singlePoint[0];
					});
				});
				var minY = d3.min(polygonData, function(countyPoints){
					return d3.min(countyPoints, function(singlePoint){
						return singlePoint[1];
					});
				});
				var maxX = d3.max(polygonData, function(countyPoints){
					return d3.max(countyPoints, function(singlePoint){
						return singlePoint[0];
					});
				});
				var maxY = d3.max(polygonData, function(countyPoints){
					return d3.max(countyPoints, function(singlePoint){
						return singlePoint[1];
					});
				});
				var x = [minX, maxX], y = [minY, maxY];
				console.log(x);
				console.log(y);
				renderCounties(polygonData, x, y, 0.625);
			});
			function renderCounties(polygons, xRange, yRange, scaling){
				svg.attr("width", Math.ceil(scaling * (xRange[1]-xRange[0])))
					.attr("height", Math.ceil(scaling * (yRange[1]-yRange[0])));
				var xScale = d3.scaleLinear().domain(xRange).range([0, Math.ceil(scaling * (xRange[1]-xRange[0]))]);
				var yScale = d3.scaleLinear().domain(yRange).range([Math.ceil(scaling * (yRange[1]-yRange[0])), 0]);
				polygons.forEach(function(county){
					//console.log(county);
					var ptString = ""
					county.forEach(function(d){
						//console.log([xScale(d[0]),yScale(d[1])].join(","));
						ptString += " " + [xScale(d[0]),yScale(d[1])].join(",");
					})
					svg.append("polygon")
						.attr("points", ptString)
						.attr("fill", "none")
						.attr("stroke", "black")
						.attr("stroke-width", "0.25");
				});
			}
		</script>
	</body>
</html>